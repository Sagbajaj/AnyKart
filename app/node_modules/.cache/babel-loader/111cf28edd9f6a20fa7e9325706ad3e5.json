{"ast":null,"code":"import _defineProperty from\"C:/Users/ombal/Desktop/project/anykart/AnyKart/app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"C:/Users/ombal/Desktop/project/anykart/AnyKart/app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/ombal/Desktop/project/anykart/AnyKart/app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"C:/Users/ombal/Desktop/project/anykart/AnyKart/app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"C:/Users/ombal/Desktop/project/anykart/AnyKart/app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/ombal/Desktop/project/anykart/AnyKart/app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import\"../../App.css\";import React,{Component}from\"react\";import Header from\"../../components/Header\";import{Link}from\"react-router-dom\";import Navigation from\"../../components/Navigation\";import Footer from\"../../components/Footer\";import ApiCustomerService from\"../../services/customer/ApiCustomerService\";import Swal from\"sweetalert2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginScreen=/*#__PURE__*/function(_Component){_inherits(LoginScreen,_Component);var _super=_createSuper(LoginScreen);function LoginScreen(props){var _this;_classCallCheck(this,LoginScreen);_this=_super.call(this,props);_this.onChange=function(e){return _this.setState(_defineProperty({},e.target.name,e.target.value));};_this.authenticateUser=function(e){e.preventDefault();var loginRequest={email:_this.state.email,password:_this.state.password};ApiCustomerService.fetchUserByLoginrequest(loginRequest).then(function(res){var user=res.data.result;user==null&&_this.setState({message:\"Invalid Login Credentials\"});user!==null&&_this.setState({id:user.id,firstName:user.firstName,lastName:user.lastName,email:user.email,phone:user.phone,role:user.role,message:\"\",cart:[]});user!=null&&Swal.fire({icon:\"success\",title:\"Login As \"+user.email+\" Successfully\",showConfirmButton:true,confirmButtonText:\"OKAY\"});user!=null&&_this.setState({message:\"User Login successfully.\"});user!=null&&window.localStorage.setItem(\"status\",true);user!=null&&window.localStorage.setItem(\"user_fname\",user.firstName);user!=null&&window.localStorage.setItem(\"user_lname\",user.lastName);user!=null&&window.localStorage.setItem(\"user_email\",user.email);user!=null&&window.localStorage.setItem(\"user_phone\",user.phone);user!=null&&window.localStorage.setItem(\"user_role\",user.role);user!=null&&JSON.stringify(window.localStorage.setItem(\"user_id\",user.id));user!=null&&user.role===\"CUSTOMER\"&&_this.updateUserCart();user!=null&&user.role===\"SUPPLIER\"&&_this.props.history.push(\"/supplierhome\");user!=null&&user.role===\"DELIVERY_BOY\"&&_this.props.history.push(\"/deliveryboyhome\");user!=null&&user.role===\"ADMIN\"&&_this.props.history.push(\"/adminhome\");user!=null&&user.role===\"CUSTOMER\"&&_this.props.history.push(\"/home\");});};_this.state={id:\"\",firstName:\"\",lastName:\"\",email:\"\",password:\"\",phone:\"\",role:\"\",message:\"\"};_this.authenticateUser=_this.authenticateUser.bind(_assertThisInitialized(_this));_this.getCartSize=_this.getCartSize.bind(_assertThisInitialized(_this));_this.updateUserCart=_this.updateUserCart.bind(_assertThisInitialized(_this));return _this;}_createClass(LoginScreen,[{key:\"getCartSize\",value:function getCartSize(){setTimeout(function(){ApiCustomerService.getCartByUserId(JSON.parse(window.localStorage.getItem(\"user_id\"))).then(function(res){JSON.stringify(window.localStorage.setItem(\"cart_size\",res.data.result.length));});},1000);}},{key:\"updateUserCart\",value:function updateUserCart(){var cartUserId=JSON.parse(window.localStorage.getItem(\"user_id\"));var cartSize=JSON.parse(window.localStorage.getItem(\"cart_size\"));if(cartSize>0){ApiCustomerService.updateCartUserId(cartUserId);}this.getCartSize();}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(Header,{title:\"Login\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h5\",{className:\"nameColor1\",children:this.state.message}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"form\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"name@gmail.com\",name:\"email\",value:this.state.email,onChange:this.onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"*****\",name:\"password\",value:this.state.password,onChange:this.onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"float-start\",children:[/*#__PURE__*/_jsx(\"br\",{}),\"New User? \",/*#__PURE__*/_jsx(Link,{to:\"/create-account\",children:\"Create Account here\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-hover color-9 float-end\",onClick:this.authenticateUser,children:\"Login\"}),/*#__PURE__*/_jsx(\"br\",{})]})]})]})]});}}]);return LoginScreen;}(Component);export default LoginScreen;","map":{"version":3,"sources":["C:/Users/ombal/Desktop/project/anykart/AnyKart/app/src/screens/common/LoginScreen.js"],"names":["React","Component","Header","Link","Navigation","Footer","ApiCustomerService","Swal","LoginScreen","props","onChange","e","setState","target","name","value","authenticateUser","preventDefault","loginRequest","email","state","password","fetchUserByLoginrequest","then","res","user","data","result","message","id","firstName","lastName","phone","role","cart","fire","icon","title","showConfirmButton","confirmButtonText","window","localStorage","setItem","JSON","stringify","updateUserCart","history","push","bind","getCartSize","setTimeout","getCartByUserId","parse","getItem","length","cartUserId","cartSize","updateCartUserId"],"mappings":"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","sourcesContent":["import \"../../App.css\";\r\nimport React, { Component } from \"react\";\r\nimport Header from \"../../components/Header\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Navigation from \"../../components/Navigation\";\r\nimport Footer from \"../../components/Footer\";\r\nimport ApiCustomerService from \"../../services/customer/ApiCustomerService\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nclass LoginScreen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: \"\",\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      phone: \"\",\r\n      role: \"\",\r\n      message: \"\",\r\n    };\r\n    this.authenticateUser = this.authenticateUser.bind(this);\r\n    this.getCartSize = this.getCartSize.bind(this);\r\n    this.updateUserCart = this.updateUserCart.bind(this);\r\n  }\r\n\r\n  onChange = (e) => this.setState({ [e.target.name]: e.target.value });\r\n\r\n  getCartSize() {\r\n    setTimeout(() => {\r\n      ApiCustomerService.getCartByUserId(\r\n        JSON.parse(window.localStorage.getItem(\"user_id\"))\r\n      ).then((res) => {\r\n        JSON.stringify(\r\n          window.localStorage.setItem(\"cart_size\", res.data.result.length)\r\n        );\r\n      });\r\n    }, 1000);\r\n  }\r\n\r\n  updateUserCart() {\r\n    let cartUserId = JSON.parse(window.localStorage.getItem(\"user_id\"));\r\n    let cartSize = JSON.parse(window.localStorage.getItem(\"cart_size\"));\r\n    if (cartSize > 0) {\r\n      ApiCustomerService.updateCartUserId(cartUserId);\r\n    }\r\n    this.getCartSize();\r\n  }\r\n  authenticateUser = (e) => {\r\n    e.preventDefault();\r\n    let loginRequest = {\r\n      email: this.state.email,\r\n      password: this.state.password,\r\n    };\r\n\r\n    ApiCustomerService.fetchUserByLoginrequest(loginRequest).then((res) => {\r\n      let user = res.data.result;\r\n      user == null && this.setState({ message: \"Invalid Login Credentials\" });\r\n      user !== null &&\r\n        this.setState({\r\n          id: user.id,\r\n          firstName: user.firstName,\r\n          lastName: user.lastName,\r\n          email: user.email,\r\n          phone: user.phone,\r\n          role: user.role,\r\n          message: \"\",\r\n          cart: [],\r\n        });\r\n\r\n      user != null &&\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Login As \" + user.email + \" Successfully\",\r\n          showConfirmButton: true,\r\n          confirmButtonText: \"OKAY\",\r\n        });\r\n      user != null && this.setState({ message: \"User Login successfully.\" });\r\n      user != null && window.localStorage.setItem(\"status\", true);\r\n      user != null && window.localStorage.setItem(\"user_fname\", user.firstName);\r\n      user != null && window.localStorage.setItem(\"user_lname\", user.lastName);\r\n      user != null && window.localStorage.setItem(\"user_email\", user.email);\r\n      user != null && window.localStorage.setItem(\"user_phone\", user.phone);\r\n      user != null && window.localStorage.setItem(\"user_role\", user.role);\r\n\r\n      user != null &&\r\n        JSON.stringify(window.localStorage.setItem(\"user_id\", user.id));\r\n      user != null && user.role === \"CUSTOMER\" && this.updateUserCart();\r\n      user != null &&\r\n        user.role === \"SUPPLIER\" &&\r\n        this.props.history.push(\"/supplierhome\");\r\n      user != null &&\r\n        user.role === \"DELIVERY_BOY\" &&\r\n        this.props.history.push(\"/deliveryboyhome\");\r\n      user != null &&\r\n        user.role === \"ADMIN\" &&\r\n        this.props.history.push(\"/adminhome\");\r\n      user != null &&\r\n        user.role === \"CUSTOMER\" &&\r\n        this.props.history.push(\"/home\");\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Navigation />\r\n        <div className=\"main\">\r\n          <Header title=\"Login\" />\r\n          <br />\r\n          <h5 className=\"nameColor1\">{this.state.message}</h5>\r\n          <form>\r\n            <form className=\"mb-3\">\r\n              <label className=\"form-label\">Email</label>\r\n              <input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                placeholder=\"name@gmail.com\"\r\n                name=\"email\"\r\n                value={this.state.email}\r\n                onChange={this.onChange}\r\n              />\r\n            </form>\r\n            <div className=\"mb-3\">\r\n              <label className=\"form-label\">Password</label>\r\n              <input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                placeholder=\"*****\"\r\n                name=\"password\"\r\n                value={this.state.password}\r\n                onChange={this.onChange}\r\n              ></input>\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <br />\r\n              <div className=\"float-start\">\r\n                <br></br>\r\n                New User? <Link to=\"/create-account\">Create Account here</Link>\r\n              </div>\r\n              <button\r\n                className=\"btn-hover color-9 float-end\"\r\n                onClick={this.authenticateUser}\r\n              >\r\n                Login\r\n              </button>\r\n              <br></br>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default LoginScreen;\r\n"]},"metadata":{},"sourceType":"module"}